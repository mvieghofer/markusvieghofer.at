<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

    <title>markusvieghofer.at - Software made in Österreich</title>
    <meta name="description" content="Log executed tests can be handy to find bugs in your tests. When you use gradle to build your project you need to add some code to accomplish this." />

    <meta name="HandheldFriendly" content="True" />
    <meta name="MobileOptimized" content="320" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Customisation  -->
    

    <!-- favicons -->
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/images/favicons/favicon.ico">

    <link rel="stylesheet" type="text/css" href="/assets/css/screen.css">
    <link rel="stylesheet" type="text/css" href="/assets/css/main.css">
    <link id="atf" data-btf="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400;//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.css" />

</head>
<body class="home-template">

    <header class="main-header post-head no-cover">
    <nav class="main-nav  clearfix">
        <a class="back-button icon-arrow-left" href="/">Home</a>
        <a class="subscribe-button icon-feed" href="/feed.xml">Subscribe</a>
    </nav>
</header>

<main class="content" role="main">

    <article class="post">

        <header class="post-header">
            <h1 class="post-title">Gradle Test Logs</h1>
            <section class="post-meta">
                <time class="post-date" datetime="2017-02-23">23 Feb 2017</time>
                <div class="tagsContainer">
    
        <a href="/tag/gradle">#gradle</a>
    
        <a href="/tag/tutorial">#tutorial</a>
    
        <a href="/tag/java">#java</a>
    
        <a href="/tag/junit">#junit</a>
    
</div>

            </section>
        </header>

<!--         <header class="post-header">
            <a id="blog-logo" href="http://markusvieghofer.at">
                
                    <span class="blog-title">markusvieghofer.at</span>
                
            </a>
        </header> -->

        <!-- <span class="post-meta">
            <time datetime="2017-02-23">23 Feb 2017</time>
            
        </span> -->

        <!-- <h1 class="post-title">Gradle Test Logs</h1> -->

        <section class="post-content">
            <p>Testing your software is important and should be part of every development process. Without tests you cannot confidently refactor important and/or big parts of your application which will lead to legacy code that gets harder and harder to work with.</p>

<p>The problem with testing is that it is hard. Writing good tests and software that can easily be tested is not a trivial task and even if we do our best to write good tests they sometimes fail for no obvious reason.</p>

<p><a href="/assets/images/gradle-test-logs/tests.jpg"><img src="/assets/images/gradle-test-logs/tests-small.jpg" alt="Testing is hard" /></a></p>

<p>In the worst case scenario the test suite works fine on your local machine but doesn’t on a colleagues laptop or on your build server.</p>

<p>Most of the times I’ve seen such a behavior some tests caused some side effects that let other tests fail.</p>

<p>When your tests are written in Java using JUnit the order in which your tests are executed is random. It can neither be guaranteed that they are executed in a certain order nor that this order is the same every time your test suite is executed.</p>

<p>When your tests work on your local machine but fail on the build server it’s often hard to tell why they fail.</p>

<p>One reason might be that one of your tests produces side effects that let another test fail. In order to find such a test you need to know in which order your tests are executed.</p>

<p>If you build your project using Gradle the order in which your tests are executed is not logged by default. To get this you need to add some code to your Gradle file.</p>

<p>Luckily the test task comes with <a href="https://docs.gradle.org/current/javadoc/org/gradle/api/tasks/testing/TestListener.html">some additional methods</a> to handle certain events. So basically everything is there you just have to activate it.</p>

<p>For example you can react to the <code class="highlighter-rouge">beforeTest</code>, <code class="highlighter-rouge">afterTest</code>, <code class="highlighter-rouge">beforeSuite</code> or the <code class="highlighter-rouge">afterSuite</code> event. As the names imply these events are triggered either before or after a certain test or test suite is executed.</p>

<p><a href="/assets/images/gradle-test-logs/logging.jpg"><img src="/assets/images/gradle-test-logs/logging-small.jpg" alt="Testing is hard" /></a></p>

<p>Both after events provide a descriptor of the test or test suite as well as its result. Since I also wanted to log the result of each test I chose to use the <code class="highlighter-rouge">afterTest</code> event. If you would use the <code class="highlighter-rouge">before</code> events no results but only the descriptor would be available for you.</p>

<p>Using the following few lines you can log the order of your tests.</p>

<script src="https://gist.github.com/mvieghofer/c42c81746467a59a9763e559034ead88.js"></script>

<p>I chose to remove the package of the fully qualified class name we get from <code class="highlighter-rouge">getClassName()</code> since I think it is better readable. After I’ve prepared the class name I just log all information I want using the <code class="highlighter-rouge">logger.lifecycle</code> method that comes with Gradle.</p>

        </section>

        

        <footer class="post-footer">
            <!-- If we want to display author's name and bio -->
            
                <figure class="author-image">
                    <a class="img" href="/" style="background-image: url(/assets/images/profile.jpg)">
                    <span class="hidden">Markus Vieghofer's Picture</span></a>
                </figure>
                <div class="author-image-line"></div>
                <section class="author">
                    <!-- Author Name -->
                    <h4> Markus Vieghofer </h4>
                    <!-- Author Bio -->
                    <p>
                        I love developing software. Most of the time I stick with Java and Android but I also try something new from time to time. I'm  also on <a href='https://twitter.com/mvieghofer' target='_blank'>Twitter</a> and <a href='https://github.com/mvieghofer' target='_blank'>Github</a>.
                    </p>
                </section>
            

            <!-- Share links section -->
            <section class="share">
    <h4>Share this post</h4>
    <a class="icon-twitter" href="http://twitter.com/share?text=Gradle Test Logs&amp;url=http://markusvieghofer.at/gradle-test-logs"
        onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
        <span class="hidden">Twitter</span>
    </a>
    <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://markusvieghofer.at/gradle-test-logs"
        onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
        <span class="hidden">Facebook</span>
    </a>
    <a class="icon-google-plus" href="https://plus.google.com/share?url=http://markusvieghofer.at/gradle-test-logs"
       onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
        <span class="hidden">Google+</span>
    </a>
</section>

            <!-- Disqus comments -->
            

        </footer>

    </article>

</main>

    <footer class="site-footer clearfix">
      <section class="copyright">
        <a href="/">markusvieghofer.at</a> &copy;
              2017 &bull; All rights reserved.
      </section>
      <section class="poweredby">Made with Jekyll using
        <a href="http://github.com/rosario/kasper">Kasper theme</a>
      </section>
    </footer>

    <script type="text/javascript" src="/assets/js/btf.js"></script>
    <script type="text/javascript" src="/assets/js/jquery-1.11.1.min.js"></script>
    <script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="/assets/js/index.js"></script>

    <!-- Google Analytics Tracking code -->
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-83732990-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.js"></script>
    <script>
    window.addEventListener("load", function(){
    window.cookieconsent.initialise({
      "palette": {
        "popup": {
          "background": "#27ae60",
          "text": "#000000"
        },
        "button": {
          "background": "transparent",
          "text": "#454545",
          "border": "#454545"
        }
      }
    })});
    </script>
</body>
</html>
